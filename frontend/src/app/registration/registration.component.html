<div class="login"></div>
<div class="container-fluid content">
  <div class="container ">
    <div class="row justify-content-center">
      <div class="card ">
        <div class="card-header">
          <h2>Registration</h2>
        </div>
        <div class="card-body">
          <form [formGroup]="registerForm">
            <div class="form-row">
              <label for="name" class="col-sm-2 col-form-label">Name</label>
              <div class="col">
                <input type="text"
                  [ngClass]="{'invalid' :registerForm.get('name').invalid && (registerForm.get('name').touched)}"
                  class="form-control" [pattern]="nameRegex" placeholder="Full Name" formControlName="name"
                  [minlength]="3" [maxlength]="40"  #name>
                <div *ngIf="registerForm.get('name').invalid && (registerForm.get('name').dirty || registerForm.get('name').touched)"
                  class="hasError">
                  <div *ngIf="registerForm.get('name').hasError('required')">
                    <div class=" show-error-msg">
                      <small>Name cannot be empty</small>
                    </div>
                  </div>
                </div>
                <div *ngIf="registerForm.get('name').invalid && (registerForm.get('name').touched)" class="hasError">
                  <div *ngIf="registerForm.get('name').hasError('pattern')">
                    <div class=" show-error-msg">
                      <small>Invalid name, No special characters or nummbers. Must have space between first and last name.</small>
                    </div>
                  </div>
                  <div *ngIf="registerForm.get('name').hasError('minlength')">
                    <div class=" show-error-msg">
                      <small>Name should be between 3 and 40 characters</small>
                    </div>
                  </div>
                </div>

              </div>
            </div>
            <div class="form-row">
              <label for="email" class="col-sm-2 col-form-label">Email</label>
              <div class="col">
                <input type="email"
                  [ngClass]="{'invalid' : registerForm.get('email').invalid && (registerForm.get('email').touched) }"
                  class="form-control" [pattern]="emailRegex" (blur)="checkEmail(email.value)" placeholder="Email" formControlName="email" #email>
                <div
                  *ngIf="registerForm.get('email').invalid && (registerForm.get('email').dirty || registerForm.get('email').touched)"
                  class="hasError">
                  <div *ngIf="registerForm.get('email').hasError('required')">
                    <div class=" show-error-msg">
                      <small>Email cannot be empty.</small>
                    </div>
                  </div>
                </div>
                <div *ngIf="registerForm.get('email').invalid && (registerForm.get('email').touched)" class="hasError">
                  <div *ngIf="registerForm.get('email').hasError('pattern')">
                    <div class=" show-error-msg">
                      <small>Invalid e-mail.</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-row">
              <label for="username" class="col-sm-2 col-form-label">Username</label>
              <div class="col">
                <input type="text" class="form-control"
                  [ngClass]="{'invalid' : registerForm.get('username').invalid && (registerForm.get('username').touched) }"
                  [pattern]="usernameRegex" placeholder="Username" [minlength]="8" (blur)="checkUsername(username.value)" [maxlength]="20"
                  formControlName="username" #username>
                <div *ngIf="registerForm.get('username').invalid && (registerForm.get('username').dirty || registerForm.get('username').touched)"
                  class="hasError">
                  <div *ngIf="registerForm.get('username').hasError('required')">
                    <div class=" show-error-msg">
                      <small>Username cannot be empty.</small>
                    </div>
                  </div>
                </div>
                <div *ngIf="registerForm.get('username').invalid && (registerForm.get('username').touched)"
                  class="hasError">
                  <div *ngIf="registerForm.get('username').hasError('pattern')">
                    <div class=" show-error-msg">
                      <small>Username must be alphanumeric and no special characters(./_ is allowed)</small>
                    </div>
                  </div>
                  <div *ngIf="registerForm.get('username').hasError('minlength')">
                    <div class=" show-error-msg">
                      <small>Username should be between 8 and 20 characters</small>
                    </div>
                  </div>
                </div>
                
              </div>
            </div>
            <div class="form-row">
              <label for="Password" class="col-sm-2 col-form-label">Password</label>
              <div class="col">
                <input type="password"
                  [ngClass]="{'invalid' : registerForm.get('password').invalid && (registerForm.get('password').touched) }"
                  [pattern]="passwordRegex" class="form-control" placeholder="Password" formControlName="password"
                  [minlength]="8" [maxlength]="30" #password>
                <div *ngIf="registerForm.get('password').invalid && (registerForm.get('password').dirty || registerForm.get('password').touched)"
                  class="hasError">
                  <div *ngIf="registerForm.get('password').hasError('required')">
                    <div class=" show-error-msg">
                      <small>Password cannot be empty.</small>
                    </div>
                  </div>
                </div>
                <div *ngIf="registerForm.get('password').invalid && (registerForm.get('password').touched)"
                  class="hasError">
                  <div *ngIf="registerForm.get('password').hasError('pattern')">
                    <div class=" show-error-msg">
                      <small>Password must be between 8 to 30 Characters. Password must contain at least one lower case, one uppercase, one number
                      and one special character</small>
                    </div>
                  </div>
                  <div *ngIf="registerForm.get('password').hasError('minlength')">
                    <div class=" show-error-msg">
                      <small>Password should be between 8 and 30 characters</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
              <strong>Error!</strong> {{message}}.
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="form-row">
                
              <div class="col form-button">
                <button type="button" class="btn btn-dark"
                  (click)="addUser(name.value, email.value,username.value, password.value)">Register</button>
              </div>
            </div>
            <div class="register">
              <div>
                Already a member?
                <a routerLink="/login" class="register-text">
                  Login
                </a>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>